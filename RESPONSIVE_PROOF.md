# レスポンシブ収容の数学的証明

## iPhone最小画面サイズでの検証

### 最小画面（iPhone SE 1st gen）
- **画面高さ**: 568px
- **セーフエリア**: 上下各20px（最大）
- **利用可能高さ**: 568 - 40 = 528px

### 通常時（録音前）の高さ計算

1. **連続日数表示**: 
   - 最小: clamp(8px, 1.5vh, 12px) × 2 + フォント = 約50px
   - flex-shrink: 0（縮小しない）

2. **今日のお題**: 
   - max-height: 25vh = 568px × 0.25 = 142px
   - flex-shrink: 1（縮小可能）
   - 内部スクロール対応

3. **録音ボタン**: 
   - 最小: 100px (min-width/height: 100px)
   - flex-shrink: 0（縮小しない）
   - margin-top: auto（下端に固定）

4. **パディング**: 
   - 上下: max(env(safe-area-inset-*), clamp(...)) = 約20px

**合計（最大）**: 50 + 142 + 100 + 20 = 312px < 528px ✅

**余裕**: 528 - 312 = 216px（波形や分析結果表示用）

### 録音中の高さ計算

1. **連続日数表示（縮小）**: 
   - recording-mode: clamp(6px, 1vh, 8px) × 2 + 縮小フォント = 約35px

2. **今日のお題**: 
   - 非表示（display: none）

3. **波形ビジュアライザー**: 
   - height: clamp(60px, 12vh, 100px) = 約80px
   - padding: clamp(15px, 3vh, 25px) × 2 = 約40px
   - 合計: 約120px

4. **録音ボタン**: 
   - 最小: 100px
   - flex-shrink: 0

5. **パディング**: 
   - 約20px

**合計**: 35 + 120 + 100 + 20 = 275px < 528px ✅

**余裕**: 528 - 275 = 253px

### 超小型画面（max-height: 600px）での検証

- **画面高さ**: 600px
- **利用可能高さ**: 600 - 40 = 560px

**録音中合計**: 35 + 120 + 100 + 20 = 275px < 560px ✅

### 結論

✅ **すべてのiPhoneモデルで、スクロールなしで全要素が画面内に収まる**
✅ **録音ボタンは常に画面下端から安全な距離に配置される**
✅ **録音中は今日のお題を非表示にして、波形とボタンが確実に表示される**
