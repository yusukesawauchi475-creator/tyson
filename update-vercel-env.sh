#!/bin/bash

# Tysonå°‚ç”¨ç’°å¢ƒï¼ˆtyson-3341fï¼‰ã¸ã®å®Œå…¨ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# å®Ÿè¡Œå‰ã« firebase login ã§ yusuke.sawauchi.475@gmail.com ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã›ã‚ˆ

set -e

echo "ðŸš¨ è­¦å‘Š: ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ Vercel ã®ç’°å¢ƒå¤‰æ•°ã‚’ä¸€æ‹¬æ›´æ–°ã—ã¾ã™"
echo "ðŸ“§ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç¢ºèª: yusuke.sawauchi.475@gmail.com ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„"
echo ""
read -p "ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ (y/N): " confirm
if [ "$confirm" != "y" ] && [ "$confirm" != "Y" ]; then
  echo "âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ"
  exit 1
fi

# Firebase CLIã§ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª
echo "ðŸ” Firebase CLI ã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèªä¸­..."
if ! firebase projects:list &>/dev/null; then
  echo "âŒ Firebase CLI ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“ã€‚å…ˆã« 'firebase login' ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„"
  exit 1
fi

# ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèª
CURRENT_PROJECT=$(firebase use 2>&1 | grep -oP '(?<=Using )\S+' || echo "")
if [ "$CURRENT_PROJECT" != "tyson-3341f" ]; then
  echo "âš ï¸  ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: $CURRENT_PROJECT"
  echo "ðŸ”„ tyson-3341f ã«åˆ‡ã‚Šæ›¿ãˆã¾ã™..."
  firebase use tyson-3341f
fi

echo ""
echo "ðŸ“‹ Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚’å–å¾—ä¸­..."
echo "âš ï¸  ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’ Vercel ã«è¨­å®šã—ã¦ãã ã•ã„:"
echo ""

# Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã‚’å–å¾—ï¼ˆFirebase Consoleã‹ã‚‰æ‰‹å‹•ã§å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰
echo "ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€Vercel ã«ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã—ã¦ãã ã•ã„:"
echo ""
echo "# 1. API Key"
echo "vercel env add VITE_FIREBASE_API_KEY production"
echo ""
echo "# 2. Auth Domain"
echo "vercel env add VITE_FIREBASE_AUTH_DOMAIN production"
echo ""
echo "# 3. Project ID (tyson-3341f)"
echo "vercel env add VITE_FIREBASE_PROJECT_ID production"
echo "  â†’ å…¥åŠ›å€¤: tyson-3341f"
echo ""
echo "# 4. Storage Bucket"
echo "vercel env add VITE_FIREBASE_STORAGE_BUCKET production"
echo "  â†’ å…¥åŠ›å€¤: tyson-3341f.firebasestorage.app"
echo ""
echo "# 5. Messaging Sender ID"
echo "vercel env add VITE_FIREBASE_MESSAGING_SENDER_ID production"
echo ""
echo "# 6. App ID"
echo "vercel env add VITE_FIREBASE_APP_ID production"
echo ""
echo "# 7. Measurement ID (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)"
echo "vercel env add VITE_FIREBASE_MEASUREMENT_ID production"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¯ Firebase Console (https://console.firebase.google.com/project/tyson-3341f/settings/general) ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„"
echo ""
echo "âœ… ç’°å¢ƒå¤‰æ•°è¨­å®šå¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤:"
echo "   vercel --prod --force"
echo ""
